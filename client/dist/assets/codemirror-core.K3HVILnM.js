import{c as e,E as t,S as n,a as r,f as o,b as l,R as a,M as i,d as s,A as c,T as u,e as d,P as f,C as m,F as p,g as h,h as g,i as y,j as b,k as v}from"./codemirror-state.ClnsKiKb.js";import{E as w,D as k,k as x,W as A,a as S}from"./codemirror-view.yuH3vRs8.js";import{s as C,i as D,I as T,g as I,a as $,b as O,m as B,L as E,c as M,d as z,f as j,e as J,h as F,j as N,k as V,l as q,n as L,o as X}from"./codemirror-language.B5LqEgWw.js";import{N as P,p as R,i as H,I as _,k as U,l as W,m as G}from"./vendor.hYViCx_o.js";function Y(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function Z(e){let t=e.map(e=>"string"==typeof e?{label:e}:e),[n,r]=t.every(e=>/^\w+$/.test(e.label))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:o}of e){t[o[0]]=!0;for(let e=1;e<o.length;e++)n[o[e]]=!0}let r=Y(t)+Y(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}(t);return e=>{let o=e.matchBefore(r);return o||e.explicit?{from:o?o.from:e.pos,options:t,validFor:n}:null}}const K=c.define(),Q=w.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"¬∑¬∑¬∑"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'∆í'"}},".cm-completionIcon-class":{"&:after":{content:"'‚óã'"}},".cm-completionIcon-interface":{"&:after":{content:"'‚óå'"}},".cm-completionIcon-variable":{"&:after":{content:"'ùë•'"}},".cm-completionIcon-constant":{"&:after":{content:"'ùê∂'"}},".cm-completionIcon-type":{"&:after":{content:"'ùë°'"}},".cm-completionIcon-enum":{"&:after":{content:"'‚à™'"}},".cm-completionIcon-property":{"&:after":{content:"'‚ñ°'"}},".cm-completionIcon-keyword":{"&:after":{content:"'üîëÔ∏é'"}},".cm-completionIcon-namespace":{"&:after":{content:"'‚ñ¢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class ee{constructor(e,t,n,r){this.field=e,this.line=t,this.from=n,this.to=r}}class te{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){let t=e.mapPos(this.from,-1,i.TrackDel),n=e.mapPos(this.to,1,i.TrackDel);return null==t||null==n?null:new te(this.field,t,n)}}class ne{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],r=[t],o=e.doc.lineAt(t),l=/^\s*/.exec(o.text)[0];for(let a of this.lines){if(n.length){let n=l,o=/^\t*/.exec(a)[0].length;for(let t=0;t<o;t++)n+=e.facet(D);r.push(t+n.length-o),a=n+a.slice(o)}n.push(a),t+=a.length+1}return{text:n,ranges:this.fieldPositions.map(e=>new te(e.field,r[e.line]+e.from,r[e.line]+e.to))}}static parse(e){let t,n=[],r=[],o=[];for(let l of e.split(/\r\n?|\n/)){for(;t=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(l);){let e=t[1]?+t[1]:null,a=t[2]||t[3]||"",i=-1,s=a.replace(/\\[{}]/g,e=>e[1]);for(let t=0;t<n.length;t++)(null!=e?n[t].seq==e:s&&n[t].name==s)&&(i=t);if(i<0){let t=0;for(;t<n.length&&(null==e||null!=n[t].seq&&n[t].seq<e);)t++;n.splice(t,0,{seq:e,name:s}),i=t;for(let e of o)e.field>=i&&e.field++}o.push(new ee(i,r.length,t.index,t.index+s.length)),l=l.slice(0,t.index)+a+l.slice(t.index+t[0].length)}l=l.replace(/\\([{}])/g,(e,t,n)=>{for(let l of o)l.line==r.length&&l.from>n&&(l.from--,l.to--);return t}),r.push(l)}return new ne(r,o)}}let re=k.widget({widget:new class extends A{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),oe=k.mark({class:"cm-snippetField"});class le{constructor(e,t){this.ranges=e,this.active=t,this.deco=k.set(e.map(e=>(e.from==e.to?re:oe).range(e.from,e.to)))}map(e){let t=[];for(let n of this.ranges){let r=n.map(e);if(!r)return null;t.push(r)}return new le(t,this.active)}selectionInsideField(e){return e.ranges.every(e=>this.ranges.some(t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))}}const ae=l.define({map:(e,t)=>e&&e.map(t)}),ie=l.define(),se=n.define({create:()=>null,update(e,t){for(let n of t.effects){if(n.is(ae))return n.value;if(n.is(ie)&&e)return new le(e.ranges,n.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>w.decorations.from(e,e=>e?e.deco:k.none)});function ce(e,n){return t.create(e.filter(e=>e.field==n).map(e=>t.range(e.from,e.to)))}function ue(e){let t=ne.parse(e);return(e,n,r,o)=>{let{text:a,ranges:i}=t.instantiate(e.state,r),{main:s}=e.state.selection,c={changes:{from:r,to:o==s.from?s.to:o,insert:d.of(a)},scrollIntoView:!0,annotations:n?[K.of(n),u.userEvent.of("input.complete")]:void 0};if(i.length&&(c.selection=ce(i,0)),i.some(e=>e.field>0)){let t=new le(i,0),n=c.effects=[ae.of(t)];void 0===e.state.field(se,!1)&&n.push(l.appendConfig.of([se,pe,ge,Q]))}e.dispatch(e.state.update(c))}}function de(e){return({state:t,dispatch:n})=>{let r=t.field(se,!1);if(!r||e<0&&0==r.active)return!1;let o=r.active+e,l=e>0&&!r.ranges.some(t=>t.field==o+e);return n(t.update({selection:ce(r.ranges,o),effects:ae.of(l?null:new le(r.ranges,o)),scrollIntoView:!0})),!0}}const fe=[{key:"Tab",run:de(1),shift:de(-1)},{key:"Escape",run:({state:e,dispatch:t})=>!!e.field(se,!1)&&(t(e.update({effects:ae.of(null)})),!0)}],me=p.define({combine:e=>e.length?e[0]:fe}),pe=f.highest(x.compute([me],e=>e.facet(me)));function he(e,t){return Object.assign(Object.assign({},t),{apply:ue(e)})}const ge=w.domEventHandlers({mousedown(e,t){let n,r=t.state.field(se,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let o=r.ranges.find(e=>e.from<=n&&e.to>=n);return!(!o||o.field==r.active)&&(t.dispatch({selection:ce(r.ranges,o.field),effects:ae.of(r.ranges.some(e=>e.field>o.field)?new le(r.ranges,o.field):null),scrollIntoView:!0}),!0)}}),ye={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},be=l.define({map(e,t){let n=t.mapPos(e,-1,i.TrackAfter);return null==n?void 0:n}}),ve=new class extends s{};ve.startSide=1,ve.endSide=-1;const we=n.define({create:()=>a.empty,update(e,t){if(e=e.map(t.changes),t.selection){let n=t.state.doc.lineAt(t.selection.main.head);e=e.update({filter:e=>e>=n.from&&e<=n.to})}for(let n of t.effects)n.is(be)&&(e=e.update({add:[ve.range(n.value,n.value+1)]}));return e}});function ke(){return[De,we]}const xe="()[]{}<>¬´¬ª¬ª¬´ÔºªÔºΩÔΩõÔΩù";function Ae(e){for(let t=0;t<16;t+=2)if(xe.charCodeAt(t)==e)return xe.charAt(t+1);return o(e<128?e:e+1)}function Se(e,t){return e.languageDataAt("closeBrackets",t)[0]||ye}const Ce="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),De=w.inputHandler.of((t,n,o,l)=>{if((Ce?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let a=t.state.selection.main;if(l.length>2||2==l.length&&1==r(e(l,0))||n!=a.from||o!=a.to)return!1;let i=function(t,n){let r=Se(t,t.selection.main.head),o=r.brackets||ye.brackets;for(let l of o){let a=Ae(e(l,0));if(n==l)return a==l?Ee(t,l,o.indexOf(l+l+l)>-1,r):Oe(t,l,a,r.before||ye.before);if(n==a&&Ie(t,t.selection.main.from))return Be(t,l,a)}return null}(t.state,l);return!!i&&(t.dispatch(i),!0)}),Te=[{key:"Backspace",run:({state:n,dispatch:o})=>{if(n.readOnly)return!1;let l=Se(n,n.selection.main.head).brackets||ye.brackets,a=null,i=n.changeByRange(o=>{if(o.empty){let a=function(t,n){let o=t.sliceString(n-2,n);return r(e(o,0))==o.length?o:o.slice(1)}(n.doc,o.head);for(let r of l)if(r==a&&$e(n.doc,o.head)==Ae(e(r,0)))return{changes:{from:o.head-r.length,to:o.head+r.length},range:t.cursor(o.head-r.length)}}return{range:a=o}});return a||o(n.update(i,{scrollIntoView:!0,userEvent:"delete.backward"})),!a}}];function Ie(e,t){let n=!1;return e.field(we).between(0,e.doc.length,e=>{e==t&&(n=!0)}),n}function $e(t,n){let o=t.sliceString(n,n+2);return o.slice(0,r(e(o,0)))}function Oe(e,n,r,o){let l=null,a=e.changeByRange(a=>{if(!a.empty)return{changes:[{insert:n,from:a.from},{insert:r,from:a.to}],effects:be.of(a.to+n.length),range:t.range(a.anchor+n.length,a.head+n.length)};let i=$e(e.doc,a.head);return!i||/\s/.test(i)||o.indexOf(i)>-1?{changes:{insert:n+r,from:a.head},effects:be.of(a.head+n.length),range:t.cursor(a.head+n.length)}:{range:l=a}});return l?null:e.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function Be(e,n,r){let o=null,l=e.changeByRange(n=>n.empty&&$e(e.doc,n.head)==r?{changes:{from:n.head,to:n.head+r.length,insert:r},range:t.cursor(n.head+r.length)}:o={range:n});return o?null:e.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function Ee(e,n,r,o){let l=o.stringPrefixes||ye.stringPrefixes,a=null,i=e.changeByRange(o=>{if(!o.empty)return{changes:[{insert:n,from:o.from},{insert:n,from:o.to}],effects:be.of(o.to+n.length),range:t.range(o.anchor+n.length,o.head+n.length)};let i,s=o.head,c=$e(e.doc,s);if(c==n){if(Me(e,s))return{changes:{insert:n+n,from:s},effects:be.of(s+n.length),range:t.cursor(s+n.length)};if(Ie(e,s)){let o=r&&e.sliceDoc(s,s+3*n.length)==n+n+n?n+n+n:n;return{changes:{from:s,to:s+o.length,insert:o},range:t.cursor(s+o.length)}}}else{if(r&&e.sliceDoc(s-2*n.length,s)==n+n&&(i=ze(e,s-2*n.length,l))>-1&&Me(e,i))return{changes:{insert:n+n+n+n,from:s},effects:be.of(s+n.length),range:t.cursor(s+n.length)};if(e.charCategorizer(s)(c)!=m.Word&&ze(e,s,l)>-1&&!function(e,t,n,r){let o=C(e).resolveInner(t,-1),l=r.reduce((e,t)=>Math.max(e,t.length),0);for(let a=0;a<5;a++){let a=e.sliceDoc(o.from,Math.min(o.to,o.from+n.length+l)),i=a.indexOf(n);if(!i||i>-1&&r.indexOf(a.slice(0,i))>-1){let t=o.firstChild;for(;t&&t.from==o.from&&t.to-t.from>n.length+i;){if(e.sliceDoc(t.to-n.length,t.to)==n)return!1;t=t.firstChild}return!0}let s=o.to==t&&o.parent;if(!s)break;o=s}return!1}(e,s,n,l))return{changes:{insert:n+n,from:s},effects:be.of(s+n.length),range:t.cursor(s+n.length)}}return{range:a=o}});return a?null:e.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function Me(e,t){let n=C(e).resolveInner(t+1);return n.parent&&n.from==t}function ze(e,t,n){let r=e.charCategorizer(t);if(r(e.sliceDoc(t-1,t))!=m.Word)return t;for(let o of n){let n=t-o.length;if(e.sliceDoc(n,t)==o&&r(e.sliceDoc(n-1,n))!=m.Word)return n}return-1}function je(e,t){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let o=e(t,n);return!!o&&(r(n.update(o)),!0)}}const Je=je(Xe,0),Fe=je(Le,0),Ne=je((e,t)=>Le(e,t,function(e){let t=[];for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),o=n.to<=r.to?r:e.doc.lineAt(n.to);o.from>r.from&&o.from==n.to&&(o=n.to==r.to+1?r:e.doc.lineAt(n.to-1));let l=t.length-1;l>=0&&t[l].to>r.from?t[l].to=o.to:t.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:o.to})}return t}(t)),0);function Ve(e,t){let n=e.languageDataAt("commentTokens",t,1);return n.length?n[0]:{}}const qe=50;function Le(e,t,n=t.selection.ranges){let r=n.map(e=>Ve(t,e.from).block);if(!r.every(e=>e))return null;let o=n.map((e,n)=>function(e,{open:t,close:n},r,o){let l,a,i=e.sliceDoc(r-qe,r),s=e.sliceDoc(o,o+qe),c=/\s*$/.exec(i)[0].length,u=/^\s*/.exec(s)[0].length,d=i.length-c;if(i.slice(d-t.length,d)==t&&s.slice(u,u+n.length)==n)return{open:{pos:r-c,margin:c&&1},close:{pos:o+u,margin:u&&1}};o-r<=2*qe?l=a=e.sliceDoc(r,o):(l=e.sliceDoc(r,r+qe),a=e.sliceDoc(o-qe,o));let f=/^\s*/.exec(l)[0].length,m=/\s*$/.exec(a)[0].length,p=a.length-m-n.length;return l.slice(f,f+t.length)==t&&a.slice(p,p+n.length)==n?{open:{pos:r+f+t.length,margin:/\s/.test(l.charAt(f+t.length))?1:0},close:{pos:o-m-n.length,margin:/\s/.test(a.charAt(p-1))?1:0}}:null}(t,r[n],e.from,e.to));if(2!=e&&!o.every(e=>e))return{changes:t.changes(n.map((e,t)=>o[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}]))};if(1!=e&&o.some(e=>e)){let e=[];for(let t,n=0;n<o.length;n++)if(t=o[n]){let o=r[n],{open:l,close:a}=t;e.push({from:l.pos-o.open.length,to:l.pos+l.margin},{from:a.pos-a.margin,to:a.pos+o.close.length})}return{changes:e}}return null}function Xe(e,t,n=t.selection.ranges){let r=[],o=-1;for(let{from:l,to:a}of n){let e=r.length,n=1e9,i=Ve(t,l).line;if(i){for(let e=l;e<=a;){let s=t.doc.lineAt(e);if(s.from>o&&(l==a||a>s.from)){o=s.from;let e=/^\s*/.exec(s.text)[0].length,t=e==s.length,l=s.text.slice(e,e+i.length)==i?e:-1;e<s.text.length&&e<n&&(n=e),r.push({line:s,comment:l,token:i,indent:e,empty:t,single:!1})}e=s.to+1}if(n<1e9)for(let t=e;t<r.length;t++)r[t].indent<r[t].line.text.length&&(r[t].indent=n);r.length==e+1&&(r[e].single=!0)}}if(2!=e&&r.some(e=>e.comment<0&&(!e.empty||e.single))){let e=[];for(let{line:t,token:o,indent:l,empty:a,single:i}of r)!i&&a||e.push({from:t.from+l,insert:o+" "});let n=t.changes(e);return{changes:n,selection:t.selection.map(n,1)}}if(1!=e&&r.some(e=>e.comment>=0)){let e=[];for(let{line:t,comment:n,token:o}of r)if(n>=0){let r=t.from+n,l=r+o.length;" "==t.text[l-t.from]&&l++,e.push({from:r,to:l})}return{changes:e}}return null}const Pe=c.define(),Re=c.define(),He=p.define(),_e=p.define({combine:e=>y(e,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,r)=>e(n,r)||t(n,r)})}),Ue=n.define({create:()=>ut.empty,update(e,t){let n=t.state.facet(_e),r=t.annotation(Pe);if(r){let o=et.fromTransaction(t,r.selection),l=r.side,a=0==l?e.undone:e.done;return a=o?tt(a,a.length,n.minDepth,o):lt(a,t.startState.selection),new ut(0==l?r.rest:a,0==l?a:r.rest)}let o=t.annotation(Re);if("full"!=o&&"before"!=o||(e=e.isolate()),!1===t.annotation(u.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let l=et.fromTransaction(t),a=t.annotation(u.time),i=t.annotation(u.userEvent);return l?e=e.addChanges(l,a,i,n,t):t.selection&&(e=e.addSelection(t.startState.selection,a,i,n.newGroupDelay)),"full"!=o&&"after"!=o||(e=e.isolate()),e},toJSON:e=>({done:e.done.map(e=>e.toJSON()),undone:e.undone.map(e=>e.toJSON())}),fromJSON:e=>new ut(e.done.map(et.fromJSON),e.undone.map(et.fromJSON))});function We(e={}){return[Ue,_e.of(e),w.domEventHandlers({beforeinput(e,t){let n="historyUndo"==e.inputType?Ye:"historyRedo"==e.inputType?Ze:null;return!!n&&(e.preventDefault(),n(t))}})]}function Ge(e,t){return function({state:n,dispatch:r}){if(!t&&n.readOnly)return!1;let o=n.field(Ue,!1);if(!o)return!1;let l=o.pop(e,n,t);return!!l&&(r(l),!0)}}const Ye=Ge(0,!1),Ze=Ge(1,!1),Ke=Ge(0,!0),Qe=Ge(1,!0);class et{constructor(e,t,n,r,o){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=o}setSelAfter(e){return new et(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(e=>e.toJSON())}}static fromJSON(e){return new et(e.changes&&b.fromJSON(e.changes),[],e.mapped&&v.fromJSON(e.mapped),e.startSelection&&t.fromJSON(e.startSelection),e.selectionsAfter.map(t.fromJSON))}static fromTransaction(e,t){let n=rt;for(let r of e.startState.facet(He)){let t=r(e);t.length&&(n=n.concat(t))}return!n.length&&e.changes.empty?null:new et(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,rt)}static selection(e){return new et(void 0,rt,void 0,void 0,e)}}function tt(e,t,n,r){let o=t+1>n+20?t-n-1:0,l=e.slice(o,t);return l.push(r),l}function nt(e,t){return e.length?t.length?e.concat(t):e:t}const rt=[],ot=200;function lt(e,t){if(e.length){let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-ot));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),tt(e,e.length-1,1e9,n.setSelAfter(r)))}return[et.selection([t])]}function at(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function it(e,t){if(!e.length)return e;let n=e.length,r=rt;for(;n;){let o=st(e[n-1],t,r);if(o.changes&&!o.changes.empty||o.effects.length){let t=e.slice(0,n);return t[n-1]=o,t}t=o.mapped,n--,r=o.selectionsAfter}return r.length?[et.selection(r)]:rt}function st(e,t,n){let r=nt(e.selectionsAfter.length?e.selectionsAfter.map(e=>e.map(t)):rt,n);if(!e.changes)return et.selection(r);let o=e.changes.map(t),a=t.mapDesc(e.changes,!0),i=e.mapped?e.mapped.composeDesc(a):a;return new et(o,l.mapEffects(e.effects,t),i,e.startSelection.map(a),r)}const ct=/^(input\.type|delete)($|\.)/;class ut{constructor(e,t,n=0,r=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new ut(this.done,this.undone):this}addChanges(e,t,n,r,o){let a=this.done,i=a[a.length-1];return a=i&&i.changes&&!i.changes.empty&&e.changes&&(!n||ct.test(n))&&(!i.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(o,function(e,t){let n=[],r=!1;return e.iterChangedRanges((e,t)=>n.push(e,t)),t.iterChangedRanges((e,t,o,l)=>{for(let a=0;a<n.length;){let e=n[a++],t=n[a++];l>=e&&o<=t&&(r=!0)}}),r}(i.changes,e.changes))||"input.type.compose"==n)?tt(a,a.length-1,r.minDepth,new et(e.changes.compose(i.changes),nt(l.mapEffects(e.effects,i.changes),i.effects),i.mapped,i.startSelection,rt)):tt(a,a.length,r.minDepth,e),new ut(a,rt,t,n)}addSelection(e,t,n,r){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:rt;return o.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&(l=o[o.length-1],a=e,l.ranges.length==a.ranges.length&&0===l.ranges.filter((e,t)=>e.empty!=a.ranges[t].empty).length)?this:new ut(lt(this.done,e),this.undone,t,n);var l,a}addMapping(e){return new ut(it(this.done,e),it(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=0==e?this.done:this.undone;if(0==r.length)return null;let o=r[r.length-1],l=o.selectionsAfter[0]||t.selection;if(n&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:Pe.of({side:e,rest:at(r),selection:l}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let n=1==r.length?rt:r.slice(0,r.length-1);return o.mapped&&(n=it(n,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:Pe.of({side:e,rest:n,selection:l}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}ut.empty=new ut(rt,rt);const dt=[{key:"Mod-z",run:Ye,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Ze,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Ze,preventDefault:!0},{key:"Mod-u",run:Ke,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Qe,preventDefault:!0}];function ft(e,n){return t.create(e.ranges.map(n),e.mainIndex)}function mt(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function pt({state:e,dispatch:t},n){let r=ft(e.selection,n);return!r.eq(e.selection,!0)&&(t(mt(e,r)),!0)}function ht(e,n){return t.cursor(n?e.to:e.from)}function gt(e,t){return pt(e,n=>n.empty?e.moveByChar(n,t):ht(n,t))}function yt(e){return e.textDirectionAt(e.state.selection.main.head)==S.LTR}const bt=e=>gt(e,!yt(e)),vt=e=>gt(e,yt(e));function wt(e,t){return pt(e,n=>n.empty?e.moveByGroup(n,t):ht(n,t))}function kt(e,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function xt(e,n,r){let o,l,a=C(e).resolveInner(n.head),i=r?P.closedBy:P.openedBy;for(let t=n.head;;){let n=r?a.childAfter(t):a.childBefore(t);if(!n)break;kt(e,n,i)?a=n:t=r?n.to:n.from}return l=a.type.prop(i)&&(o=r?B(e,a.from,1):B(e,a.to,-1))&&o.matched?r?o.end.to:o.end.from:r?a.to:a.from,t.cursor(l,r?-1:1)}function At(e,t){return pt(e,n=>{if(!n.empty)return ht(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)})}const St=e=>At(e,!1),Ct=e=>At(e,!0);function Dt(e){let t,n=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,r=0,o=0;if(n){for(let t of e.state.facet(w.scrollMargins)){let n=t(e);(null==n?void 0:n.top)&&(r=Math.max(null==n?void 0:n.top,r)),(null==n?void 0:n.bottom)&&(o=Math.max(null==n?void 0:n.bottom,o))}t=e.scrollDOM.clientHeight-r-o}else t=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:o,selfScroll:n,height:Math.max(e.defaultLineHeight,t-5)}}function Tt(e,t){let n,r=Dt(e),{state:o}=e,l=ft(o.selection,n=>n.empty?e.moveVertically(n,t,r.height):ht(n,t));if(l.eq(o.selection))return!1;if(r.selfScroll){let t=e.coordsAtPos(o.selection.main.head),a=e.scrollDOM.getBoundingClientRect(),i=a.top+r.marginTop,s=a.bottom-r.marginBottom;t&&t.top>i&&t.bottom<s&&(n=w.scrollIntoView(l.main.head,{y:"start",yMargin:t.top-i}))}return e.dispatch(mt(o,l),{effects:n}),!0}const It=e=>Tt(e,!1),$t=e=>Tt(e,!0);function Ot(e,n,r){let o=e.lineBlockAt(n.head),l=e.moveToLineBoundary(n,r);if(l.head==n.head&&l.head!=(r?o.to:o.from)&&(l=e.moveToLineBoundary(n,r,!1)),!r&&l.head==o.from&&o.length){let r=/^\s*/.exec(e.state.sliceDoc(o.from,Math.min(o.from+100,o.to)))[0].length;r&&n.head!=o.from+r&&(l=t.cursor(o.from+r))}return l}function Bt(e,n){let r=ft(e.state.selection,e=>{let r=n(e);return t.range(e.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return!r.eq(e.state.selection)&&(e.dispatch(mt(e.state,r)),!0)}function Et(e,t){return Bt(e,n=>e.moveByChar(n,t))}const Mt=e=>Et(e,!yt(e)),zt=e=>Et(e,yt(e));function jt(e,t){return Bt(e,n=>e.moveByGroup(n,t))}function Jt(e,t){return Bt(e,n=>e.moveVertically(n,t))}const Ft=e=>Jt(e,!1),Nt=e=>Jt(e,!0);function Vt(e,t){return Bt(e,n=>e.moveVertically(n,t,Dt(e).height))}const qt=e=>Vt(e,!1),Lt=e=>Vt(e,!0),Xt=({state:e,dispatch:t})=>(t(mt(e,{anchor:0})),!0),Pt=({state:e,dispatch:t})=>(t(mt(e,{anchor:e.doc.length})),!0),Rt=({state:e,dispatch:t})=>(t(mt(e,{anchor:e.selection.main.anchor,head:0})),!0),Ht=({state:e,dispatch:t})=>(t(mt(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function _t(e,n){if(e.state.readOnly)return!1;let r="delete.selection",{state:o}=e,l=o.changeByRange(o=>{let{from:l,to:a}=o;if(l==a){let t=n(o);t<l?(r="delete.backward",t=Ut(e,t,!1)):t>l&&(r="delete.forward",t=Ut(e,t,!0)),l=Math.min(l,t),a=Math.max(a,t)}else l=Ut(e,l,!1),a=Ut(e,a,!0);return l==a?{range:o}:{changes:{from:l,to:a},range:t.cursor(l,l<o.head?-1:1)}});return!l.changes.empty&&(e.dispatch(o.update(l,{scrollIntoView:!0,userEvent:r,effects:"delete.selection"==r?w.announce.of(o.phrase("Selection deleted")):void 0})),!0)}function Ut(e,t,n){if(e instanceof w)for(let r of e.state.facet(w.atomicRanges).map(t=>t(e)))r.between(t,t,(e,r)=>{e<t&&r>t&&(t=n?r:e)});return t}const Wt=(e,t,n)=>_t(e,r=>{let o,l,a=r.from,{state:i}=e,s=i.doc.lineAt(a);if(n&&!t&&a>s.from&&a<s.from+200&&!/[^ \t]/.test(o=s.text.slice(0,a-s.from))){if("\t"==o[o.length-1])return a-1;let e=h(o,i.tabSize)%O(i)||O(i);for(let t=0;t<e&&" "==o[o.length-1-t];t++)a--;l=a}else l=g(s.text,a-s.from,t,t)+s.from,l==a&&s.number!=(t?i.doc.lines:1)?l+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(s.text.slice(l-s.from,a-s.from))&&(l=g(s.text,l-s.from,!1,!1)+s.from);return l}),Gt=e=>Wt(e,!1,!0),Yt=e=>Wt(e,!0,!1),Zt=(e,t)=>_t(e,n=>{let r=n.head,{state:o}=e,l=o.doc.lineAt(r),a=o.charCategorizer(r);for(let e=null;;){if(r==(t?l.to:l.from)){r==n.head&&l.number!=(t?o.doc.lines:1)&&(r+=t?1:-1);break}let i=g(l.text,r-l.from,t)+l.from,s=l.text.slice(Math.min(r,i)-l.from,Math.max(r,i)-l.from),c=a(s);if(null!=e&&c!=e)break;" "==s&&r==n.head||(e=c),r=i}return r}),Kt=e=>Zt(e,!1);function Qt(e){let t=[],n=-1;for(let r of e.selection.ranges){let o=e.doc.lineAt(r.from),l=e.doc.lineAt(r.to);if(r.empty||r.to!=l.from||(l=e.doc.lineAt(r.to-1)),n>=o.number){let e=t[t.length-1];e.to=l.to,e.ranges.push(r)}else t.push({from:o.from,to:l.to,ranges:[r]});n=l.number+1}return t}function en(e,n,r){if(e.readOnly)return!1;let o=[],l=[];for(let a of Qt(e)){if(r?a.to==e.doc.length:0==a.from)continue;let n=e.doc.lineAt(r?a.to+1:a.from-1),i=n.length+1;if(r){o.push({from:a.to,to:n.to},{from:a.from,insert:n.text+e.lineBreak});for(let n of a.ranges)l.push(t.range(Math.min(e.doc.length,n.anchor+i),Math.min(e.doc.length,n.head+i)))}else{o.push({from:n.from,to:a.from},{from:a.to,insert:e.lineBreak+n.text});for(let e of a.ranges)l.push(t.range(e.anchor-i,e.head-i))}}return!!o.length&&(n(e.update({changes:o,scrollIntoView:!0,selection:t.create(l,e.selection.mainIndex),userEvent:"move.line"})),!0)}function tn(e,t,n){if(e.readOnly)return!1;let r=[];for(let o of Qt(e))n?r.push({from:o.from,insert:e.doc.slice(o.from,o.to)+e.lineBreak}):r.push({from:o.to,insert:e.lineBreak+e.doc.slice(o.from,o.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const nn=rn(!1);function rn(e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let o=n.changeByRange(r=>{let{from:o,to:l}=r,a=n.doc.lineAt(o),i=!e&&o==l&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n,r=C(e).resolveInner(t),o=r.childBefore(t),l=r.childAfter(t);return o&&l&&o.to<=t&&l.from>=t&&(n=o.type.prop(P.closedBy))&&n.indexOf(l.name)>-1&&e.doc.lineAt(o.to).from==e.doc.lineAt(l.from).from&&!/\S/.test(e.sliceDoc(o.to,l.from))?{from:o.to,to:l.from}:null}(n,o);e&&(o=l=(l<=a.to?a:n.doc.lineAt(l)).to);let s=new T(n,{simulateBreak:o,simulateDoubleBreak:!!i}),c=I(s,o);for(null==c&&(c=h(/^\s*/.exec(n.doc.lineAt(o).text)[0],n.tabSize));l<a.to&&/\s/.test(a.text[l-a.from]);)l++;i?({from:o,to:l}=i):o>a.from&&o<a.from+100&&!/\S/.test(a.text.slice(0,o))&&(o=a.from);let u=["",$(n,c)];return i&&u.push($(n,s.lineIndent(a.from,-1))),{changes:{from:o,to:l,insert:d.of(u)},range:t.cursor(o+1+u[1].length)}});return r(n.update(o,{scrollIntoView:!0,userEvent:"input"})),!0}}function on(e,n){let r=-1;return e.changeByRange(o=>{let l=[];for(let t=o.from;t<=o.to;){let a=e.doc.lineAt(t);a.number>r&&(o.empty||o.to>a.from)&&(n(a,l,o),r=a.number),t=a.to+1}let a=e.changes(l);return{changes:l,range:t.range(a.mapPos(o.anchor,1),a.mapPos(o.head,1))}})}const ln=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(on(e,(t,n)=>{n.push({from:t.from,insert:e.facet(D)})}),{userEvent:"input.indent"})),!0),an=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(on(e,(t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let o=h(r,e.tabSize),l=0,a=$(e,Math.max(0,o-O(e)));for(;l<r.length&&l<a.length&&r.charCodeAt(l)==a.charCodeAt(l);)l++;n.push({from:t.from+l,to:t.from+r.length,insert:a.slice(l)})}),{userEvent:"delete.dedent"})),!0),sn=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>pt(e,t=>xt(e.state,t,!yt(e))),shift:e=>Bt(e,t=>xt(e.state,t,!yt(e)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>pt(e,t=>xt(e.state,t,yt(e))),shift:e=>Bt(e,t=>xt(e.state,t,yt(e)))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>en(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>tn(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>en(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>tn(e,t,!0)},{key:"Escape",run:({state:e,dispatch:n})=>{let r=e.selection,o=null;return r.ranges.length>1?o=t.create([r.main]):r.main.empty||(o=t.create([t.cursor(r.main.head)])),!!o&&(n(mt(e,o)),!0)}},{key:"Mod-Enter",run:rn(!0)},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:n})=>{let r=Qt(e).map(({from:n,to:r})=>t.range(n,Math.min(r+1,e.doc.length)));return n(e.update({selection:t.create(r),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:n})=>{let r=ft(e.selection,n=>{let r=C(e),o=r.resolveStack(n.from,1);if(n.empty){let e=r.resolveStack(n.from,-1);e.node.from>=o.node.from&&e.node.to<=o.node.to&&(o=e)}for(let e=o;e;e=e.next){let{node:r}=e;if((r.from<n.from&&r.to>=n.to||r.to>n.to&&r.from<=n.from)&&e.next)return t.range(r.to,r.from)}return n});return!r.eq(e.selection)&&(n(mt(e,r)),!0)},preventDefault:!0},{key:"Mod-[",run:an},{key:"Mod-]",run:ln},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),r=new T(e,{overrideIndentation:e=>{let t=n[e];return null==t?-1:t}}),o=on(e,(t,o,l)=>{let a=I(r,t.from);if(null==a)return;/\S/.test(t.text)||(a=0);let i=/^\s*/.exec(t.text)[0],s=$(e,a);(i!=s||l.from<t.from+i.length)&&(n[t.from]=a,o.push({from:t.from,to:t.from+i.length,insert:s}))});return o.changes.empty||t(e.update(o,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(Qt(t).map(({from:e,to:n})=>(e>0?e--:n<t.doc.length&&n++,{from:e,to:n}))),r=ft(t.selection,t=>{let n;if(e.lineWrapping){let r=e.lineBlockAt(t.head),o=e.coordsAtPos(t.head,t.assoc||1);o&&(n=r.bottom+e.documentTop-o.bottom+e.defaultLineHeight/2)}return e.moveVertically(t,!0,n)}).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:n})=>function(e,n){let r=!1,o=ft(e.selection,n=>{let o=B(e,n.head,-1)||B(e,n.head,1)||n.head>0&&B(e,n.head-1,1)||n.head<e.doc.length&&B(e,n.head+1,-1);if(!o||!o.end)return n;r=!0;let l=o.start.from==n.head?o.end.to:o.end.from;return t.cursor(l)});return!!r&&(n(mt(e,o)),!0)}(e,n)},{key:"Mod-/",run:e=>{let{state:t}=e,n=t.doc.lineAt(t.selection.main.from),r=Ve(e.state,n.from);return r.line?Je(e):!!r.block&&Ne(e)}},{key:"Alt-A",run:Fe},{key:"Ctrl-m",mac:"Shift-Alt-m",run:e=>(e.setTabFocusMode(),!0)}].concat([{key:"ArrowLeft",run:bt,shift:Mt,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>wt(e,!yt(e)),shift:e=>jt(e,!yt(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>pt(e,t=>Ot(e,t,!yt(e))),shift:e=>Bt(e,t=>Ot(e,t,!yt(e))),preventDefault:!0},{key:"ArrowRight",run:vt,shift:zt,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>wt(e,yt(e)),shift:e=>jt(e,yt(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>pt(e,t=>Ot(e,t,yt(e))),shift:e=>Bt(e,t=>Ot(e,t,yt(e))),preventDefault:!0},{key:"ArrowUp",run:St,shift:Ft,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Xt,shift:Rt},{mac:"Ctrl-ArrowUp",run:It,shift:qt},{key:"ArrowDown",run:Ct,shift:Nt,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Pt,shift:Ht},{mac:"Ctrl-ArrowDown",run:$t,shift:Lt},{key:"PageUp",run:It,shift:qt},{key:"PageDown",run:$t,shift:Lt},{key:"Home",run:e=>pt(e,t=>Ot(e,t,!1)),shift:e=>Bt(e,t=>Ot(e,t,!1)),preventDefault:!0},{key:"Mod-Home",run:Xt,shift:Rt},{key:"End",run:e=>pt(e,t=>Ot(e,t,!0)),shift:e=>Bt(e,t=>Ot(e,t,!0)),preventDefault:!0},{key:"Mod-End",run:Pt,shift:Ht},{key:"Enter",run:nn,shift:nn},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:Gt,shift:Gt},{key:"Delete",run:Yt},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Kt},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>Zt(e,!0)},{mac:"Mod-Backspace",run:e=>_t(e,t=>{let n=e.moveToLineBoundary(t,!1).head;return t.head>n?n:Math.max(0,t.head-1)})},{mac:"Mod-Delete",run:e=>_t(e,t=>{let n=e.moveToLineBoundary(t,!0).head;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)})}].concat([{key:"Ctrl-b",run:bt,shift:Mt,preventDefault:!0},{key:"Ctrl-f",run:vt,shift:zt},{key:"Ctrl-p",run:St,shift:Ft},{key:"Ctrl-n",run:Ct,shift:Nt},{key:"Ctrl-a",run:e=>pt(e,n=>t.cursor(e.lineBlockAt(n.head).from,1)),shift:e=>Bt(e,n=>t.cursor(e.lineBlockAt(n.head).from))},{key:"Ctrl-e",run:e=>pt(e,n=>t.cursor(e.lineBlockAt(n.head).to,-1)),shift:e=>Bt(e,n=>t.cursor(e.lineBlockAt(n.head).to))},{key:"Ctrl-d",run:Yt},{key:"Ctrl-h",run:Gt},{key:"Ctrl-k",run:e=>_t(e,t=>{let n=e.lineBlockAt(t.head).to;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)})},{key:"Ctrl-Alt-h",run:Kt},{key:"Ctrl-o",run:({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:d.of(["",""])},range:t.cursor(e.from)}));return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(n=>{if(!n.empty||0==n.from||n.from==e.doc.length)return{range:n};let r=n.from,o=e.doc.lineAt(r),l=r==o.from?r-1:g(o.text,r-o.from,!1)+o.from,a=r==o.to?r+1:g(o.text,r-o.from,!0)+o.from;return{changes:{from:l,to:a,insert:e.doc.slice(r,a).append(e.doc.slice(l,r))},range:t.cursor(a)}});return!r.changes.empty&&(n(e.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:$t}].map(e=>({mac:e.key,run:e.run,shift:e.shift}))));let cn=null;function un(){if(!cn&&"object"==typeof document&&document.body){let{style:e}=document.body,t=[],n=new Set;for(let r in e)"cssText"!=r&&"cssFloat"!=r&&"string"==typeof e[r]&&(/[A-Z]/.test(r)&&(r=r.replace(/[A-Z]/g,e=>"-"+e.toLowerCase())),n.has(r)||(t.push(r),n.add(r)));cn=t.sort().map(e=>({type:"property",label:e,apply:e+": "}))}return cn||[]}const dn=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(e=>({type:"class",label:e})),fn=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(e=>({type:"keyword",label:e})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(e=>({type:"constant",label:e}))),mn=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(e=>({type:"type",label:e})),pn=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(e=>({type:"keyword",label:e})),hn=/^(\w[\w-]*|-\w[\w-]*|)$/,gn=/^-(-[\w-]*)?$/;const yn=new H,bn=["Declaration"];function vn(e){for(let t=e;;){if(t.type.isTop)return t;if(!(t=t.parent))return e}}function wn(e,t,n){if(t.to-t.from>4096){let r=yn.get(t);if(r)return r;let o=[],l=new Set,a=t.cursor(_.IncludeAnonymous);if(a.firstChild())do{for(let t of wn(e,a.node,n))l.has(t.label)||(l.add(t.label),o.push(t))}while(a.nextSibling());return yn.set(t,o),o}{let r=[],o=new Set;return t.cursor().iterate(t=>{var l;if(n(t)&&t.matchContext(bn)&&":"==(null===(l=t.node.nextSibling)||void 0===l?void 0:l.name)){let n=e.sliceString(t.from,t.to);o.has(n)||(o.add(n),r.push({label:n,type:"variable"}))}}),r}}const kn=(e=>t=>{let{state:n,pos:r}=t,o=C(n).resolveInner(r,-1),l=o.type.isError&&o.from==o.to-1&&"-"==n.doc.sliceString(o.from,o.to);if("PropertyName"==o.name||(l||"TagName"==o.name)&&/^(Block|Styles)$/.test(o.resolve(o.to).name))return{from:o.from,options:un(),validFor:hn};if("ValueName"==o.name)return{from:o.from,options:fn,validFor:hn};if("PseudoClassName"==o.name)return{from:o.from,options:dn,validFor:hn};if(e(o)||(t.explicit||l)&&function(e,t){var n;if(("("==e.name||e.type.isError)&&(e=e.parent||e),"ArgList"!=e.name)return!1;let r=null===(n=e.parent)||void 0===n?void 0:n.firstChild;return"Callee"==(null==r?void 0:r.name)&&"var"==t.sliceString(r.from,r.to)}(o,n.doc))return{from:e(o)||l?o.from:r,options:wn(n.doc,vn(o),e),validFor:gn};if("TagName"==o.name){for(let{parent:e}=o;e;e=e.parent)if("Block"==e.name)return{from:o.from,options:un(),validFor:hn};return{from:o.from,options:mn,validFor:hn}}if("AtKeyword"==o.name)return{from:o.from,options:pn,validFor:hn};if(!t.explicit)return null;let a=o.resolve(r),i=a.childBefore(r);return i&&":"==i.name&&"PseudoClassSelector"==a.name?{from:r,options:dn,validFor:hn}:i&&":"==i.name&&"Declaration"==a.name||"ArgList"==a.name?{from:r,options:fn,validFor:hn}:"Block"==a.name||"Styles"==a.name?{from:r,options:un(),validFor:hn}:null})(e=>"VariableName"==e.name),xn=M.define({name:"css",parser:R.configure({props:[z.add({Declaration:J()}),j.add({"Block KeyframeList":F})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function An(){return new E(xn,xn.data.of({autocomplete:kn}))}const Sn=[he("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),he("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),he("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),he("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),he("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),he("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),he("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),he("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),he("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),he('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),he('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],Cn=Sn.concat([he("interface ${name} {\n\t${}\n}",{label:"interface",detail:"definition",type:"keyword"}),he("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),he("enum ${name} {\n\t${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),Dn=new H,Tn=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function In(e){return(t,n)=>{let r=t.node.getChild("VariableDefinition");return r&&n(r,e),!0}}const $n=["FunctionDeclaration"],On={FunctionDeclaration:In("function"),ClassDeclaration:In("class"),ClassExpression:()=>!0,EnumDeclaration:In("constant"),TypeAliasDeclaration:In("type"),NamespaceDeclaration:In("namespace"),VariableDefinition(e,t){e.matchContext($n)||t(e,"variable")},TypeDefinition(e,t){t(e,"type")},__proto__:null};function Bn(e,t){let n=Dn.get(t);if(n)return n;let r=[],o=!0;function l(t,n){let o=e.sliceString(t.from,t.to);r.push({label:o,type:n})}return t.cursor(_.IncludeAnonymous).iterate(t=>{if(o)o=!1;else if(t.name){let e=On[t.name];if(e&&e(t,l)||Tn.has(t.name))return!1}else if(t.to-t.from>8192){for(let n of Bn(e,t.node))r.push(n);return!1}}),Dn.set(t,r),r}const En=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,Mn=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function zn(e){let t=C(e.state).resolveInner(e.pos,-1);if(Mn.indexOf(t.name)>-1)return null;let n="VariableName"==t.name||t.to-t.from<20&&En.test(e.state.sliceDoc(t.from,t.to));if(!n&&!e.explicit)return null;let r=[];for(let o=t;o;o=o.parent)Tn.has(o.name)&&(r=r.concat(Bn(e.state.doc,o)));return{options:r,from:n?t.from:e.pos,validFor:En}}const jn=M.define({name:"javascript",parser:U.configure({props:[z.add({IfStatement:J({except:/^\s*({|else\b)/}),TryStatement:J({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:V,SwitchBody:e=>{let t=e.textAfter,n=/^\s*\}/.test(t),r=/^\s*(case|default)\b/.test(t);return e.baseIndent+(n?0:r?1:2)*e.unit},Block:N({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":J({except:/^\s*{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag":e=>e.column(e.node.from)+e.unit}),j.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":F,BlockComment:e=>({from:e.from+2,to:e.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),Jn={test:e=>/^JSX/.test(e.name),facet:L({commentTokens:{block:{open:"{/*",close:"*/}"}}})},Fn=jn.configure({dialect:"ts"},"typescript"),Nn=jn.configure({dialect:"jsx",props:[q.add(e=>e.isTop?[Jn]:void 0)]}),Vn=jn.configure({dialect:"jsx ts",props:[q.add(e=>e.isTop?[Jn]:void 0)]},"typescript");let qn=e=>({label:e,type:"keyword"});const Ln="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(qn),Xn=Ln.concat(["declare","implements","private","protected","public"].map(qn));function Pn(e={}){let t=e.jsx?e.typescript?Vn:Nn:e.typescript?Fn:jn,n=e.typescript?Cn.concat(Xn):Sn.concat(Ln);return new E(t,[jn.data.of({autocomplete:(r=Mn,o=Z(n),e=>{for(let t=C(e.state).resolveInner(e.pos,-1);t;t=t.parent){if(r.indexOf(t.name)>-1)return null;if(t.type.isTop)break}return o(e)})}),jn.data.of({autocomplete:zn}),e.jsx?_n:[]]);var r,o}function Rn(e,t,n=e.length){for(let r=null==t?void 0:t.firstChild;r;r=r.nextSibling)if("JSXIdentifier"==r.name||"JSXBuiltin"==r.name||"JSXNamespacedName"==r.name||"JSXMemberExpression"==r.name)return e.sliceString(r.from,Math.min(r.to,n));return""}const Hn="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),_n=w.inputHandler.of((e,n,r,o,l)=>{if((Hn?e.composing:e.compositionStarted)||e.state.readOnly||n!=r||">"!=o&&"/"!=o||!jn.isActiveAt(e.state,n,-1))return!1;let a=l(),{state:i}=a,s=i.changeByRange(e=>{var n;let r,{head:l}=e,a=C(i).resolveInner(l-1,-1);if("JSXStartTag"==a.name&&(a=a.parent),i.doc.sliceString(l-1,l)!=o||"JSXAttributeValue"==a.name&&a.to>l);else{if(">"==o&&"JSXFragmentTag"==a.name)return{range:e,changes:{from:l,insert:"</>"}};if("/"==o&&"JSXStartCloseTag"==a.name){let e=a.parent,o=e.parent;if(o&&e.from==l-2&&((r=Rn(i.doc,o.firstChild,l))||"JSXFragmentTag"==(null===(n=o.firstChild)||void 0===n?void 0:n.name))){let e=`${r}>`;return{range:t.cursor(l+e.length,-1),changes:{from:l,insert:e}}}}else if(">"==o){let t=function(e){for(;;){if("JSXOpenTag"==e.name||"JSXSelfClosingTag"==e.name||"JSXFragmentTag"==e.name)return e;if("JSXEscape"==e.name||!e.parent)return null;e=e.parent}}(a);if(t&&"JSXOpenTag"==t.name&&!/^\/?>|^<\//.test(i.doc.sliceString(l,l+2))&&(r=Rn(i.doc,t,l)))return{range:e,changes:{from:l,insert:`</${r}>`}}}}return{range:e}});return!s.changes.empty&&(e.dispatch([a,i.update(s,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),Un=["_blank","_self","_top","_parent"],Wn=["ascii","utf-8","utf-16","latin1","latin1"],Gn=["get","post","put","delete"],Yn=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],Zn=["true","false"],Kn={},Qn={a:{attrs:{href:null,ping:null,type:null,media:null,target:Un,hreflang:null}},abbr:Kn,address:Kn,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:Kn,aside:Kn,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:Kn,base:{attrs:{href:null,target:Un}},bdi:Kn,bdo:Kn,blockquote:{attrs:{cite:null}},body:Kn,br:Kn,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:Yn,formmethod:Gn,formnovalidate:["novalidate"],formtarget:Un,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:Kn,center:Kn,cite:Kn,code:Kn,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:Kn,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:Kn,div:Kn,dl:Kn,dt:Kn,em:Kn,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:Kn,figure:Kn,footer:Kn,form:{attrs:{action:null,name:null,"accept-charset":Wn,autocomplete:["on","off"],enctype:Yn,method:Gn,novalidate:["novalidate"],target:Un}},h1:Kn,h2:Kn,h3:Kn,h4:Kn,h5:Kn,h6:Kn,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:Kn,hgroup:Kn,hr:Kn,html:{attrs:{manifest:null}},i:Kn,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:Yn,formmethod:Gn,formnovalidate:["novalidate"],formtarget:Un,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:Kn,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:Kn,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:Kn,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:Wn,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:Kn,noscript:Kn,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:Kn,param:{attrs:{name:null,value:null}},pre:Kn,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:Kn,rt:Kn,ruby:Kn,samp:Kn,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:Wn}},section:Kn,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:Kn,source:{attrs:{src:null,type:null,media:null}},span:Kn,strong:Kn,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:Kn,summary:Kn,sup:Kn,table:Kn,tbody:Kn,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:Kn,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:Kn,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:Kn,time:{attrs:{datetime:null}},title:Kn,tr:Kn,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:Kn,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:Kn},er={accesskey:null,class:null,contenteditable:Zn,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:Zn,autocorrect:Zn,autocapitalize:Zn,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":Zn,"aria-autocomplete":["inline","list","both","none"],"aria-busy":Zn,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":Zn,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":Zn,"aria-hidden":Zn,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":Zn,"aria-multiselectable":Zn,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":Zn,"aria-relevant":null,"aria-required":Zn,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},tr="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(e=>"on"+e);for(let wr of tr)er[wr]=null;class nr{constructor(e,t){this.tags=Object.assign(Object.assign({},Qn),e),this.globalAttrs=Object.assign(Object.assign({},er),t),this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}function rr(e,t,n=e.length){if(!t)return"";let r=t.firstChild,o=r&&r.getChild("TagName");return o?e.sliceString(o.from,Math.min(o.to,n)):""}function or(e,t=!1){for(;e;e=e.parent)if("Element"==e.name){if(!t)return e;t=!1}return null}function lr(e,t,n){let r=n.tags[rr(e,or(t))];return(null==r?void 0:r.children)||n.allTags}function ar(e,t){let n=[];for(let r=or(t);r&&!r.type.isTop;r=or(r.parent)){let o=rr(e,r);if(o&&"CloseTag"==r.lastChild.name)break;o&&n.indexOf(o)<0&&("EndTag"==t.name||t.from>=r.firstChild.to)&&n.push(o)}return n}nr.default=new nr;const ir=/^[:\-\.\w\u00b7-\uffff]*$/;function sr(e,t,n,r,o){let l=/\s*>/.test(e.sliceDoc(o,o+5))?"":">",a=or(n,!0);return{from:r,to:o,options:lr(e.doc,a,t).map(e=>({label:e,type:"type"})).concat(ar(e.doc,n).map((e,t)=>({label:"/"+e,apply:"/"+e+l,type:"type",boost:99-t}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function cr(e,t,n,r){let o=/\s*>/.test(e.sliceDoc(r,r+5))?"":">";return{from:n,to:r,options:ar(e.doc,t).map((e,t)=>({label:e,apply:e+o,type:"type",boost:99-t})),validFor:ir}}function ur(e,t){let{state:n,pos:r}=t,o=C(n).resolveInner(r,-1),l=o.resolve(r);for(let a,i=r;l==o&&(a=o.childBefore(i));){let e=a.lastChild;if(!e||!e.type.isError||e.from<e.to)break;l=o=a,i=e.from}return"TagName"==o.name?o.parent&&/CloseTag$/.test(o.parent.name)?cr(n,o,o.from,r):sr(n,e,o,o.from,r):"StartTag"==o.name?sr(n,e,o,r,r):"StartCloseTag"==o.name||"IncompleteCloseTag"==o.name?cr(n,o,r,r):"OpenTag"==o.name||"SelfClosingTag"==o.name||"AttributeName"==o.name?function(e,t,n,r,o){let l=or(n),a=l?t.tags[rr(e.doc,l)]:null,i=a&&a.attrs?Object.keys(a.attrs):[];return{from:r,to:o,options:(a&&!1===a.globalAttrs?i:i.length?i.concat(t.globalAttrNames):t.globalAttrNames).map(e=>({label:e,type:"property"})),validFor:ir}}(n,e,o,"AttributeName"==o.name?o.from:r,r):"Is"==o.name||"AttributeValue"==o.name||"UnquotedAttributeValue"==o.name?function(e,t,n,r,o){var l;let a,i=null===(l=n.parent)||void 0===l?void 0:l.getChild("AttributeName"),s=[];if(i){let l=e.sliceDoc(i.from,i.to),c=t.globalAttrs[l];if(!c){let r=or(n),o=r?t.tags[rr(e.doc,r)]:null;c=(null==o?void 0:o.attrs)&&o.attrs[l]}if(c){let t=e.sliceDoc(r,o).toLowerCase(),n='"',l='"';/^['"]/.test(t)?(a='"'==t[0]?/^[^"]*$/:/^[^']*$/,n="",l=e.sliceDoc(o,o+1)==t[0]?"":t[0],t=t.slice(1),r++):a=/^[^\s<>='"]*$/;for(let e of c)s.push({label:e,apply:n+e+l,type:"constant"})}}return{from:r,to:o,options:s,validFor:a}}(n,e,o,"Is"==o.name?r:o.from,r):!t.explicit||"Element"!=l.name&&"Text"!=l.name&&"Document"!=l.name?null:function(e,t,n,r){let o=[],l=0;for(let a of lr(e.doc,n,t))o.push({label:"<"+a,type:"type"});for(let a of ar(e.doc,n))o.push({label:"</"+a+">",type:"type",boost:99-l++});return{from:r,to:r,options:o,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}(n,e,o,r)}function dr(e){let{extraTags:t,extraGlobalAttributes:n}=e,r=n||t?new nr(t,n):nr.default;return e=>ur(r,e)}const fr=jn.parser.configure({top:"SingleExpression"}),mr=[{tag:"script",attrs:e=>"text/typescript"==e.type||"ts"==e.lang,parser:Fn.parser},{tag:"script",attrs:e=>"text/babel"==e.type||"text/jsx"==e.type,parser:Nn.parser},{tag:"script",attrs:e=>"text/typescript-jsx"==e.type,parser:Vn.parser},{tag:"script",attrs:e=>/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(e.type),parser:fr},{tag:"script",attrs:e=>!e.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(e.type),parser:jn.parser},{tag:"style",attrs:e=>(!e.lang||"css"==e.lang)&&(!e.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(e.type)),parser:xn.parser}],pr=[{name:"style",parser:xn.parser.configure({top:"Styles"})}].concat(tr.map(e=>({name:e,parser:jn.parser}))),hr=M.define({name:"html",parser:G.configure({props:[z.add({Element(e){let t=/^(\s*)(<\/)?/.exec(e.textAfter);return e.node.to<=e.pos+t[0].length?e.continue():e.lineIndent(e.node.from)+(t[2]?0:e.unit)},"OpenTag CloseTag SelfClosingTag":e=>e.column(e.node.from)+e.unit,Document(e){if(e.pos+/\s*/.exec(e.textAfter)[0].length<e.node.to)return e.continue();let t,n=null;for(let r=e.node;;){let e=r.lastChild;if(!e||"Element"!=e.name||e.to!=r.to)break;n=r=e}return n&&(!(t=n.lastChild)||"CloseTag"!=t.name&&"SelfClosingTag"!=t.name)?e.lineIndent(n.from)+e.unit:null}}),j.add({Element(e){let t=e.firstChild,n=e.lastChild;return t&&"OpenTag"==t.name?{from:t.to,to:"CloseTag"==n.name?n.from:e.to}:null}}),X.add({"OpenTag CloseTag":e=>e.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"\x3c!--",close:"--\x3e"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}}),gr=hr.configure({wrap:W(mr,pr)});function yr(e={}){let t,n="";!1===e.matchClosingTags&&(n="noMatch"),!0===e.selfClosingTags&&(n=(n?n+" ":"")+"selfClosing"),(e.nestedLanguages&&e.nestedLanguages.length||e.nestedAttributes&&e.nestedAttributes.length)&&(t=W((e.nestedLanguages||[]).concat(mr),(e.nestedAttributes||[]).concat(pr)));let r=t?hr.configure({wrap:t,dialect:n}):n?gr.configure({dialect:n}):gr;return new E(r,[gr.data.of({autocomplete:dr(e)}),!1!==e.autoCloseTags?vr:[],Pn().support,An().support])}const br=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),vr=w.inputHandler.of((e,n,r,o,l)=>{if(e.composing||e.state.readOnly||n!=r||">"!=o&&"/"!=o||!gr.isActiveAt(e.state,n,-1))return!1;let a=l(),{state:i}=a,s=i.changeByRange(e=>{var n,r,l;let a,s=i.doc.sliceString(e.from-1,e.to)==o,{head:c}=e,u=C(i).resolveInner(c,-1);if(s&&">"==o&&"EndTag"==u.name){let t=u.parent;if("CloseTag"!=(null===(r=null===(n=t.parent)||void 0===n?void 0:n.lastChild)||void 0===r?void 0:r.name)&&(a=rr(i.doc,t.parent,c))&&!br.has(a)){return{range:e,changes:{from:c,to:c+(">"===i.doc.sliceString(c,c+1)?1:0),insert:`</${a}>`}}}}else if(s&&"/"==o&&"IncompleteCloseTag"==u.name){let e=u.parent;if(u.from==c-2&&"CloseTag"!=(null===(l=e.lastChild)||void 0===l?void 0:l.name)&&(a=rr(i.doc,e,c))&&!br.has(a)){let e=c+(">"===i.doc.sliceString(c,c+1)?1:0),n=`${a}>`;return{range:t.cursor(c+n.length,-1),changes:{from:c,to:e,insert:n}}}}return{range:e}});return!s.changes.empty&&(e.dispatch([a,i.update(s,{userEvent:"input.complete",scrollIntoView:!0})]),!0)});export{Kt as a,We as b,Te as c,sn as d,ke as e,An as f,yr as g,dt as h,ln as i,Pn as j,an as k};
